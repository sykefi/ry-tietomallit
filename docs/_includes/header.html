<!doctype html>
{%- assign current_model = site.data.models[page.model] -%}
  {%- if current_model -%}
    {%- capture pageTitle %}{% include getPageTitle.html haystack=current_model.nav_items needle=page.id %}{% endcapture -%}
    {%- assign pageTitle = current_model.title | append: ' - ' | append: pageTitle -%}
    {%- capture filePath -%}{%- include getFilePath.html haystack=current_model.nav_items needle=page.id -%}{%- endcapture -%}
    {%- assign page_url_segments = page.url | split: '/' -%}
    {%- if page_url_segments[1] == page.model -%}
      {%- assign pageModelVersion = page_url_segments[2] -%}
    {%- endif -%}
    {%- assign gh_repo = current_model.github.owner_name | append: '/' | append: current_model.github.repository_name -%}
    {%- assign pageId = current_model.basepath | append: '-' | append: page.id -%}
  {%- else -%}
    {%- assign gh_repo = '' -%}
    {%- assign pageId = page.id -%}
    {%- assign pageTitle = page.title -%}
    {%- assign filePath = page.name -%}
  {%- endif -%}
<html lang="{{ site.lang | default: 'en-US' }}">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" media="screen" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
    <link rel="stylesheet" type="text/css" media="print" href="{{ '/assets/css/style-print.css?v=' | append: site.github.build_revision | relative_url }}">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
    <title>{{ pageTitle }}</title>
{% seo %}
{% if site.google_analytics %}
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics }}"></script>
  <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', '{{ site.google_analytics }}');
</script>
{% endif %}
  <script src="https://polyfill.io/v3/polyfill.min.js?features=String.prototype.padStart%2Cfetch" crossorigin="anonymous"></script>
  <script>
    function setModifiedDate() {
      if ("{{ gh_repo }}" !== "" && "{{ filePath }}" !== "" && document.getElementById('last-modified')) {
        fetch("https://api.github.com/repos/{{ gh_repo }}/commits?path={{ filePath }}")
          .then((response) => {
            return response.json();
          })
          .then((commits) => {
            if (Array.isArray(commits)) {
              var commit = commits[0]['commit'];
              var url = commits[0]['html_url'];
              if (commit) {
                $("#last-modified").append("<span>Viimeksi muutettu <a href=\"" + url +"\" title=\"" 
                + commit.author.name 
                + ": " + commit.message 
                + "\">" + new Date(commit.committer.date).toLocaleString() 
                + "</a>");
              }
            }
          });
      }
    }
  </script>
  </head>
  <body class="page-{{ pageId }} {{ layout.style }}">

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="thinner">
          <div class="brand-container">
            <a class="navbar-brand long" href="{{ site.home }}/">Rakennetun ympäristön tietomallit</a>
            <div class="betatag"><span title="RY-tietomallit -sivusto ei ole vielä täysin valmis">&beta;eta</span></div>
          </div>
          <a class="owner" href="https://ym.fi/rakentaminen-ja-maankaytto">Ympäristöministeriö / Rakentaminen ja maankäyttö</a>
        </header>
        <header class="print-title-block">
          <a href="{{ site.home }}"><h1 class="title">RY-tietomallit</h1></a>
          <p class="origin">Lähde: <a href="{{ site.url }}{{ page.url }}">{{ site.url }}/{{ page.url }}</a></p>
        </header>
    </div>
    
